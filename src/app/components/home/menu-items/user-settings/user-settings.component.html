<div class="container" >
    <h2 mat-dialog-title >ACCOUNT SETTINGS
        <button mat-icon-button class="close-btn" aria-hidden="false" mat-dialog-close >
            <mat-icon>close</mat-icon>
        </button>
    </h2>
    <mat-dialog-content class="pt-10 px-20" fxLayout="column" color="primary" >
        <mat-tab-group>
            <mat-tab label="General">
              <div class="tab-content">
                  <form [formGroup]="formGroup" class="form" >
                      <div class="row mt-10">
                          <mat-form-field floatLabel='auto' class="form-element">
                              <mat-label><mat-icon>email</mat-icon>Email</mat-label>
                              <input matInput placeholder="Email" value="{{user?.email}}" disabled/>
                              <button class="button" matTooltip="{{user.emailNotify ? 'Unsubscribe' : 'Subscribe'}} to email notifications"
                               matTooltipPosition="below" mat-button color="accent" type="button"
                               (click)="updateEmailNotification()">{{user.emailNotify ? 'Unsubscribe' : 'Subscribe'}}
                              </button>
                          </mat-form-field>
                      </div>
                      <div class="row">
                          <mat-form-field floatLabel='always' class="form-element" >
                              <mat-label><mat-icon>face</mat-icon>Username</mat-label>
                              <input #username formControlName="username"  name="username" matInput placeholder="Username" />
                              <mat-error *ngIf="!formGroup.controls['username'].valid && formGroup.controls['username'].touched">
                               {{ getUsernameError() }}
                              </mat-error>
                              <button  class="button" [disabled]="isSameUsername || !formGroup.valid" type="button" mat-raised-button color="accent" (click)="saveUsername(username.value)">
                                  Save
                              </button>
                            </mat-form-field>

                      </div>
                      <div class="row">
                          <mat-form-field floatLabel='always' class="form-element" >
                              <mat-label><mat-icon>lock</mat-icon>Password</mat-label>
                              <input matInput disabled placeholder="password" value="********" />
                              <button matTooltip="Reset your password"
                              matTooltipPosition="below" class="button" type="button" mat-raised-button color="accent" (click)="openResetPassword()">
                                  Reset
                              </button>
                            </mat-form-field>
                      </div>
                    </form>
                  <footer class="mb-10">
                    <hr>
                    <ul class="row-list" fxLayout="row" fxLayoutAlign="space-between center">
                      <li>MEMBERSHIP</li>
                      <li class="list-item" [ngClass]="user.free ? 'selected' : ''">Free</li>
                      <li class="list-item" [ngClass]="user.payg ? 'selected' : ''">PAYG</li>
                      <li class="list-item" [ngClass]="user.business ? 'selected' : ''">Business</li>
                    </ul>
                </footer>
              </div>
            </mat-tab>
            <mat-tab label="Advanced">
                <div class="tab-content advanced">
                  <div class="wrapper" fxFlexAlign="stretch" xFlexOffset="10" fxLayout="column" fxFlex="100" fxLayoutGap>
                    <div class="connectionMethods" class="col" fxLayout="column" >
                      <p>
                        Choose your connection method:
                        <mat-icon matTooltip="Ohter users will only be able to interact with you through the selected identifiers." matTooltipPosition="above" matBadge="15">help</mat-icon>
                      </p>
                      <div class="row" fxLayout="row" fxLayoutAlign="space-between center">
                        <mat-checkbox (change)="generateKey()" [(ngModel)]="user.contactByKey">Security Key</mat-checkbox>
                          <mat-form-field  *ngIf="user.contactByKey && user.password" floatLabel='always' class="form-element" >
                            <input matInput disabled value="{{user.password}}" />
                          </mat-form-field>
                          <mat-spinner
                          *ngIf="user.contactByKey && !user.password"
                          [diameter]="40"
                          ></mat-spinner>
                      </div>
                      <div class="row" fxLayout="row" fxLayoutAlign="space-between center">
                        <mat-checkbox (change)="updateContactMethod()" [(ngModel)]="user.contactByEmail">Email</mat-checkbox>
                      </div>
                      <div class="row" fxLayout="row" fxLayoutAlign="space-between center">
                        <mat-checkbox (change)="updateContactMethod()" [(ngModel)]="user.contacyByUsername">Username</mat-checkbox>
                      </div>
                    </div>
                    <div class="row" fxLayout="row" fxLayoutAlign="space-between center">
                        <p>
                          2 Factor-Authentication:
                          <mat-icon matTooltip="COPA users has the option of adding another layer of protection to transfers by adding a password" matTooltipPosition="above" matBadge="15">help</mat-icon>
                        </p>
                        <mat-slide-toggle
                          class="example-margin"
                          color="primary"
                          [checked]="user.externalPassword"
                          (change)="updateExternalPassword()"
                          >
                        </mat-slide-toggle>
                    </div>
                    <div class="row" fxLayout="row" fxLayoutAlign="space-between center">
                        <p>
                          Auto Extract Received Folders:
                        </p>
                        <mat-slide-toggle
                          class="example-margin"
                          [color]="color"
                          [checked]="checked"
                          [disabled]="disabled">
                        </mat-slide-toggle>
                    </div>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </mat-dialog-content>

  </div>

