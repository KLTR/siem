<div class="form-wrapper  p-50" fxLayout="column" fxLayoutAlign="start center">
  <button color="primary" *ngIf="!mobile" mat-fab  class="back-btn" (click)="goBack()">
    <mat-icon color='white'>arrow_back</mat-icon>
  </button>
  <button color="primary" *ngIf="mobile" mat-mini-fab  class="back-btn" (click)="goBack()">
    <mat-icon color='white'>arrow_back</mat-icon>
  </button>
    <div class="form-container" novalidate  fxLayout="column" fxLayoutAlign="center center">
      <img class="logo" src="../../../assets/copa/white_copa_black.png">
      <span class="mt-35 mat-title">SIGN UP</span>
      <form *ngIf="!isRegistrationComplete; else completed" [formGroup]="formGroup" (ngSubmit)="onSubmit(formGroup.value)" class="form mt-5 white-form">
        <mat-form-field class="form-element">
          <input autocomplete="true" matInput placeholder="Email*" formControlName="email" />
          <mat-error *ngIf="!formGroup.controls['email'].valid && formGroup.controls['email'].touched">
            {{ getErrorEmail() }}
          </mat-error>
        </mat-form-field>

        <mat-form-field class="form-element">
          <input matInput placeholder="Username*" formControlName="username" />
          <mat-error *ngIf="!username.valid && username.touched">
            {{ getErrorUsername() }}
          </mat-error>
        </mat-form-field>

        <mat-form-field class="form-element">
          <input matInput placeholder="Password*" formControlName="loginPassword"  [type]="hide ? 'password' : 'text'"/>
          <button type="button" mat-icon-button  matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-hint>Choose a password of at least eight characters, one uppercase letter and one number</mat-hint>
          <mat-error *ngIf="!formGroup.controls['loginPassword'].valid && formGroup.controls['loginPassword'].touched">
            {{ getErrorPassword() }}
          </mat-error>
        </mat-form-field>
        <mat-form-field class="form-element">
            <input matInput placeholder="Confirm Password*" formControlName="loginConfirmPassword" [type]="hide ? 'password' : 'text'"/>
            <mat-error *ngIf="!formGroup.controls['loginConfirmPassword'].valid && formGroup.controls['loginConfirmPassword'].touched">
              {{ getNotSamePassword() }}
            </mat-error>
          </mat-form-field>
        <div class="form-element text">
            <p>
                <span>By creating an account you agree to our <b class="underline pointer" (click)="openTermsOfUse()">Terms of Use</b> and <b class="underline pointer" (click)="openPrivacyPolicy()">Privacy Policy</b></span>
                <span class="register" (click)="register()"></span>
            </p>
            <!-- <button font mat-raised-button color="primary" type="submit" class="button" [disabled]="!formGroup.valid || isLoggingIn">
              <mat-spinner
              color="accent"
              *ngIf="isLoggingIn"
              [diameter]="30"
              ></mat-spinner>
            {{ 'login' | translate }}
          </button> -->
          <button  mat-raised-button color="primary" type="submit" class="button white-bg" [disabled]="!formGroup.valid || isRegistering">
            <span class="btn-text" *ngIf="!isRegistering">Create Account</span>
            <mat-spinner
            *ngIf="isRegistering"
            [diameter]="30"
            ></mat-spinner>
          </button>
          <span> Or </span>
          <button mat-raised-button type="button" color="accent" class="button black-btn">Go Anonymous</button>
        </div>
      </form>
      <ng-template #completed>
        <div class="completed mt-50" fxLayout="column" fxLayoutAlign="start center">
        <span>Thank you for registering with us!</span>
        <span>Please check your email to verify your account</span>
      </div>
      </ng-template>
    </div>

  </div>
